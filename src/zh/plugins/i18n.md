# å›½é™…åŒ– {#i18n}

![NPM Version](https://img.shields.io/npm/v/%40winner-fed%2Fplugin-locale?style=flat-square&colorB=646cff)

å›½é™…åŒ–æ’ä»¶ï¼ŒåŸºäº [Vue I18n](https://vue-i18n.intlify.dev/guide/)ï¼Œå®ƒå¯ä»¥è½»æ¾åœ°å°†å›½é™…åŒ–åŠŸèƒ½é›†æˆåˆ°ä½ çš„ WinJS åº”ç”¨ç¨‹åºä¹‹ä¸­ã€‚é€‚ç”¨äº Vue3ã€‚

## å¼€å¯æ–¹å¼

1. å®‰è£…æ’ä»¶

::: code-group

```bash [NPM]
$ npm add @winner-fed/plugin-locale -D
```

```bash [YARN]
$ yarn add @winner-fed/plugin-locale -D
```

```bash [PNPM]
$ pnpm add @winner-fed/plugin-locale -D
```

```bash [BUN]
$ bun add @winner-fed/plugin-locale -D
```
:::

2. åœ¨é…ç½®æ–‡ä»¶ä¸­ `.winrc` ä¸­å¼€å¯è¯¥åŠŸèƒ½

```ts
import { defineConfig } from 'win';

export default defineConfig({
  plugins: ['@winner-fed/plugin-locale'],
  /**
   * @name å›½é™…åŒ–æ’ä»¶
   * @description åŸºäº vue-i18n çš„è¯·æ±‚æ’ä»¶
   * @doc https://winjs-dev.github.io/winjs-docs/plugins/i18n.html
   */
  locale: {},
  // æˆ–ä½¿ç”¨ i18n å­—æ®µé…ç½®
});
```

## å¼€å§‹ä½¿ç”¨

å›½é™…åŒ–æ’ä»¶é‡‡ç”¨çº¦å®šå¼ç›®å½•ç»“æ„ï¼Œæˆ‘ä»¬çº¦å®šåœ¨ `src/locales[i18n]` ç›®å½•ä¸‹å¼•å…¥å¤šè¯­è¨€æ–‡ä»¶ã€‚

å¤šè¯­è¨€æ–‡ä»¶çš„å‘½åéœ€éµå¾ªæ­¤è§„èŒƒï¼š`<lang><separator><COUNTRY>.(js|json|ts)`ã€‚å…¶ä¸­ï¼Œ`<separator>` ä¸ºåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸º `-`ï¼Œå¯ä»¥é€šè¿‡ `baseSeparator` é¡¹é…ç½®ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨éœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥ç®€ä½“ä¸­æ–‡å’Œè‹±æ–‡çš„å¤šè¯­è¨€æ”¯æŒï¼Œå¯ä»¥åœ¨ `src/locales` ç›®å½•ä¸‹åˆ›å»º `zh-CN.ts` å’Œ `en-US.ts` ä¸¤ä¸ªæ–‡ä»¶ï¼š

```diff
src
  + locales
    + zh-CN.ts
    + en-US.ts
  pages
```

åœ¨ `.winrc.ts` ä¸­é…ç½®å›½é™…åŒ–æ’ä»¶ï¼š

```ts
export default {
  locale: {
    // é»˜è®¤ä½¿ç”¨ src/locales/zh-CN.ts ä½œä¸ºå¤šè¯­è¨€æ–‡ä»¶
    default: 'zh-CN',
    baseSeparator: '-',
  },
};
```

å…³äºé…ç½®çš„æ›´å¤šä»‹ç»å¯å‚è§[é…ç½®æ’ä»¶](#é…ç½®æ’ä»¶)ç« èŠ‚ã€‚

ç°åœ¨ï¼Œæ·»åŠ æ‚¨çš„ç¬¬ä¸€æ¡å¤šè¯­è¨€å†…å®¹ï¼š

```ts
// src/locales/zh-CN.ts
export default {
  welcome: 'æ¬¢è¿å…‰ä¸´ WinJS çš„ä¸–ç•Œï¼',
};
```

```ts
// src/locales/en-US.ts
export default {
  welcome: "Welcome to WinJS's world!",
};
```

```ts
// src/locales/zh-TW.ts
export default {
  welcome: "æ­¡è¿å…‰è‡¨ WinJS çš„ä¸–ç•Œï¼",
};
```

æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ `.json` æ–‡ä»¶æ¥å­˜æ”¾å¤šè¯­è¨€çš„å†…å®¹ï¼š

```json
// src/locales/zh-CN.json
{
  "welcome": "æ¬¢è¿å…‰ä¸´ WinJS çš„ä¸–ç•Œï¼"
}

// src/locales/en-US.json
{
  "welcome": "Welcome to WinJS's world!"
}

// src/locales/zh-TW.json
{
  "welcome": "æ­¡è¿å…‰è‡¨ WinJS çš„ä¸–ç•Œï¼"
}
```

ä¸€åˆ‡å°±ç»ªï¼Œç°åœ¨æ‚¨å¯ä»¥åœ¨ WinJS ä¸­ä½¿ç”¨å¤šè¯­è¨€å†…å®¹ã€‚

```vue
<template>
  <div>
    <h2>Hi! Welcome to Winjs â¤ï¸ Vue!</h2>
    <p>
      <img src="@/assets/img/logo.png" width="200" height="200" alt="logo" />
    </p>
    <div>
      {{ t('welcome') }}
    </div>
    <div>
      <button @click="setLocale('en-US')"
      >en-US</button
      >
      <br>
      <button @click="setLocale('zh-CN')"
      >zh-CN</button
      >
      <br>
      <button @click="setLocale('zh-TW')"
      >zh-TW</button
      >
    </div>
    <p>To get started, edit <code>pages/index.vue</code> and save to reload.</p>
  </div>
</template>

<script setup lang="ts">
import { setLocale, useI18n } from 'winjs';
const { t, locale } = useI18n();
</script>
```

æ¸²æŸ“çš„ç»“æœå¦‚ä¸‹ï¼š

```html
<!-- zh-CN -->
<div>æ¬¢è¿å…‰ä¸´ WinJS çš„ä¸–ç•Œï¼</div>

<!-- en-US -->
<div>Welcome to WinJS's world!</div>

<!-- zh-TW -->
<div>æ­¡è¿å…‰è‡¨ WinJS çš„ä¸–ç•Œï¼</div>
```

## åˆ‡æ¢è¯­è¨€
é€šè¿‡æä¾›çš„ `setLocale()` æ¥å£å¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿåœ°å‘é¡¹ç›®ä¸­æ·»åŠ åˆ‡æ¢è¯­è¨€çš„åŠŸèƒ½ã€‚

 ```ts
import { setLocale } from 'winjs';

setLocale('en-US');
```

å¦‚æœéœ€è¦åˆ‡æ¢ä¸ºé»˜è®¤çš„è¯­è¨€ï¼Œåªéœ€è¦è°ƒç”¨æ­¤æ–¹æ³•è€Œä¸ç”¨ä¼ é€’ä»»ä½•å‚æ•°ï¼š

```ts
// å¦‚æœæ‚¨çš„é»˜è®¤è¯­è¨€ä¸º zh-CN
// é‚£ä¹ˆä»¥ä¸‹è°ƒç”¨å…·æœ‰ä¸ setLocale('zh-CN') åŒæ ·çš„æ•ˆæœ
setLocale();
```

## å¸¸ç”¨æ¥å£ä»‹ç»

### `addLocale` åŠ¨æ€æ·»åŠ å¤šè¯­è¨€æ”¯æŒ

æ— éœ€åˆ›å»ºå¹¶ç¼–å†™å•ç‹¬çš„å¤šè¯­è¨€æ–‡ä»¶ï¼Œä½¿ç”¨ `addLocale()` æ¥å£å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ è¯­è¨€æ”¯æŒã€‚å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼š

| å‚æ•°      | ç±»å‹     | ä»‹ç»                                  |
| --------- | -------- |-------------------------------------|
| `locale`    | `String` | å¤šè¯­è¨€çš„åç§°, ç¬¦åˆ `<lang>-<COUNTRY>` è§„èŒƒçš„åç§° |
| `messages` | `Object` | å¤šè¯­è¨€çš„å†…å®¹å¯¹è±¡                            |

ä¾‹å¦‚ï¼Œæ‚¨æƒ³è¦åŠ¨æ€å¼•å…¥ç¹ä½“ä¸­æ–‡çš„å¤šè¯­è¨€æ”¯æŒï¼Œå¯ä»¥ç¼–å†™ä»£ç å¦‚ä¸‹ï¼š

```ts
import { addLocale } from 'winjs';

addLocale({ locale: 'ja-JP', messages: { lang: 'è¨€èª', test: 'ãƒ†ã‚¹ãƒˆ' } });
```

### `setLocale` è®¾ç½®è¯­è¨€

é€šè¿‡ `setLocale()` æ¥å£å¯ä»¥ä½¿ç”¨ç¼–ç¨‹çš„æ–¹æ³•åŠ¨æ€è®¾ç½®å½“å‰çš„è¯­è¨€ã€‚å®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼š

| å‚æ•°         | ç±»å‹      | ä»‹ç»                                       |
| ------------ | --------- | ------------------------------------------ |
| `lang`       | `String`  | åˆ‡æ¢åˆ°çš„è¯­è¨€                               |

```ts
import { setLocale } from 'winjs';

setLocale('en-US');
```


### useI18n

Composition API, åªèƒ½åœ¨ `setup` å‡½æ•°ä¸­ä½¿ç”¨ï¼Œæ›´å¤šç»†èŠ‚å‚è€ƒ [Vue I18n](https://vue-i18n.intlify.dev/api/composition.html#usei18n)ã€‚
 ä¸¾ä¸ª ğŸŒ°ï¼š

```vue
<template>
  <div>
    {{ t('lang') }}:
    {{ t('test') }}
  </div>
</template>

<script lang="ts" setup>
import { useI18n } from 'winjs';

const { t, locale } = useI18n();
</script>
```

`useI18n()`è¿”å›ç»“æœæ˜¯ [Composer](https://vue-i18n.intlify.dev/api/composition.html#composer)ï¼Œæä¾›ç±»ä¼¼ `t`ã€`n`ã€`d` ç­‰è½¬æ¢å‡½æ•°ï¼Œåœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚


## é…ç½®æ’ä»¶

æ‚¨å¯ä»¥åœ¨ `.winrc.ts` ä¸­é…ç½®å›½é™…åŒ–æ’ä»¶ã€‚é»˜è®¤å€¼å¦‚ä¸‹ï¼š

```ts
export default {
  locale: {
    baseSeparator: '-',
    default: 'zh-CN'
  },
};
```

é…ç½®çš„è¯¦ç»†ä»‹ç»å¦‚ä¸‹ï¼š

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | ä»‹ç» |
| --- | --- | --- | --- |
| `baseSeparator` | `String` | `-` | è¯­è¨€ï¼ˆLanguageï¼‰ä¸å›½å®¶ï¼ˆCountryï¼‰ ä¹‹é—´çš„**åˆ†å‰²ç¬¦**ã€‚é»˜è®¤æƒ…å†µä¸‹ä¸º `-`ï¼Œè¿”å›çš„è¯­è¨€åŠç›®å½•æ–‡ä»¶ä¸º `zh-CN`ã€`en-US` å’Œ `sk` ç­‰ã€‚è‹¥æŒ‡å®šä¸º `_`ï¼Œåˆ™ `default` é»˜è®¤ä¸º `zh_CN`ã€‚ |
| `default` | `String` | `zh-CN` | é¡¹ç›®**é»˜è®¤è¯­è¨€**ã€‚å½“æ£€æµ‹ä¸åˆ°å…·ä½“è¯­è¨€æ—¶ï¼Œä½¿ç”¨ `default` è®¾ç½®çš„é»˜è®¤è¯­è¨€ã€‚ |
